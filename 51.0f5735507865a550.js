"use strict";(self.webpackChunkdsea_front_end=self.webpackChunkdsea_front_end||[]).push([[51],{7051:(H,M,u)=>{u.r(M),u.d(M,{CoursesModule:()=>Q});var l=u(6895),p=u(9209),b=u(256),h=u(1194),_=u(9826),v=u(6002),e=u(4650),d=u(745),O=u(2997),P=u(42),T=u(9219);function y(n,s){1&n&&e.GkF(0)}function F(n,s){if(1&n&&(e.ynx(0),e.YNc(1,y,1,0,"ng-container",6),e.BQk()),2&n){e.oxw();const t=e.MAs(9);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function Z(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"button",8),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editCourse())}),e._uU(2,"Edit"),e.qZA(),e.TgZ(3,"button",8),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteCourse())}),e._uU(4,"Delete"),e.qZA()()}}let w=(()=>{class n{constructor(){this.onEditCourse=new e.vpe,this.onDeleteCourse=new e.vpe,this.dropdownOpened=!1}editCourse(){this.onEditCourse.emit(this.course),this.togglePopover()}deleteCourse(){this.onDeleteCourse.emit(this.course.id),this.togglePopover()}togglePopover(){this.dropdownOpened=!this.dropdownOpened}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-course-item"]],inputs:{course:"course"},outputs:{onEditCourse:"onEditCourse",onDeleteCourse:"onDeleteCourse"},decls:10,vars:2,consts:[[1,"course-wrapper"],[1,"more-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","strokeWidth","{1.5}","stroke","currentColor","className","w-6 h-6"],["strokeLinecap","round","strokeLinejoin","round","d","M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"],[4,"ngIf"],["facultyMenu",""],[4,"ngTemplateOutlet"],[1,"course-menu"],[3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-card")(1,"div",0)(2,"button",1),e.NdJ("click",function(){return o.togglePopover()}),e.O4$(),e.TgZ(3,"svg",2),e._UZ(4,"path",3),e.qZA()(),e.kcU(),e.TgZ(5,"h3"),e._uU(6),e.qZA(),e.YNc(7,F,2,1,"ng-container",4),e.qZA()(),e.YNc(8,Z,5,0,"ng-template",null,5,e.W1O)),2&t&&(e.xp6(6),e.Oqu(o.course.name),e.xp6(1),e.Q6J("ngIf",o.dropdownOpened))},dependencies:[l.O5,l.tP,T.A],styles:[".course-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;gap:20px}.course-wrapper[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex-grow:1;margin:0;padding-top:6px;font-size:16px;font-weight:500}.course-wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{display:inline-block;padding:0;border:none;background-color:inherit;cursor:pointer;width:32px;height:32px;min-width:32px;min-height:32px;border-radius:5px}.course-wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]:hover{background-color:#eeedf2}.course-wrapper[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#000}.course-menu[_ngcontent-%COMP%]{z-index:1;position:absolute;left:32px;top:0;display:flex;flex-direction:column;background-color:#fff;box-shadow:3px 5px 5px #484c97;border-radius:10px;overflow:hidden;text-align:center}.course-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background-color:inherit;border:none;outline:none;padding:10px 15px;cursor:pointer}.course-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#b9b5c9}"]}),n})();var A=u(2853),a=u(433),g=u(9841),m=u(8675),C=u(4004),E=u(2503);function D(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"button",14),e.NdJ("click",function(){const c=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.moveManager(c.uuid,!0))}),e._uU(2),e.qZA()()}if(2&n){const t=s.$implicit;e.xp6(2),e.AsE("",t.lastName," ",t.name,"")}}function N(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"button",14),e.NdJ("click",function(){const c=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.moveManager(c.uuid,!1))}),e._uU(2),e.qZA()()}if(2&n){const t=s.$implicit;e.xp6(2),e.AsE("",t.lastName," ",t.name,"")}}function k(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"button",14),e.NdJ("click",function(){const c=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.moveGroup(c.id,!0))}),e._uU(2),e.qZA()()}if(2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.shortName)}}function I(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"button",14),e.NdJ("click",function(){const c=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.moveGroup(c.id,!1))}),e._uU(2),e.qZA()()}if(2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.shortName)}}let $=(()=>{class n extends A.u{constructor(t,o){super(o),this.store=t,this.ngxSmartModalService=o,this.onSubmitCreate=new e.vpe,this.onSubmitEdit=new e.vpe,this.isForEdit=!1,this.courseForm=new a.cw({id:new a.NI(null),name:new a.NI("",[a.kI.required]),creationDate:new a.NI(""),openingDate:new a.NI(""),closingDate:new a.NI(""),managers:new a.Oe([]),groups:new a.Oe([]),tests:new a.Oe([])}),this.teachers$=this.store.select(p.N9),this.pickedTeachers$=(0,g.a)(this.teachers$,this.courseForm.controls.managers.valueChanges.pipe((0,m.O)([]))).pipe((0,C.U)(([r,c])=>r.filter(i=>c.includes(i.uuid)))),this.freeTeachers$=(0,g.a)(this.teachers$,this.courseForm.controls.managers.valueChanges.pipe((0,m.O)([]))).pipe((0,C.U)(([r,c])=>r.filter(i=>!c.includes(i.uuid)))),this.groups$=this.store.select(p.Gr),this.pickedGroups$=(0,g.a)(this.groups$,this.courseForm.controls.groups.valueChanges.pipe((0,m.O)([]))).pipe((0,C.U)(([r,c])=>r.filter(i=>c.includes(i.id)))),this.freeGroups$=(0,g.a)(this.groups$,this.courseForm.controls.groups.valueChanges.pipe((0,m.O)([]))).pipe((0,C.U)(([r,c])=>r.filter(i=>!c.includes(i.id)))),this.identifier=h.R.CreateCourseModalIdentifier}handleAddedDataModal(t){this.isForEdit=t.isForEdit,t.isForEdit&&t.course&&(this.courseForm.patchValue({id:t.course.id,name:t.course.name,openingDate:t.course.openingDate,creationDate:t.course.creationDate,closingDate:t.course.closingDate,tests:t.course.tests,groups:t.course.groups,managers:t.course.managers}),t.course.managers.forEach(r=>this.courseForm.controls.managers.push(new a.NI(r))),t.course.groups.forEach(r=>this.courseForm.controls.groups.push(new a.NI(r))),t.course.tests.forEach(r=>this.courseForm.controls.tests.push(new a.NI(r))))}handleCloseModal(){this.courseForm.reset()}submitForm(){if(this.courseForm.invalid)return;const t={id:this.courseForm.value.id,name:this.courseForm.value.name||"",creationDate:(new Date).getTime().toString(),openingDate:(new Date).getTime().toString(),closingDate:(new Date).getTime().toString(),tests:this.courseForm.controls.tests.value,managers:this.courseForm.controls.managers.value,groups:this.courseForm.controls.groups.value};this.isForEdit?this.onSubmitEdit.emit(t):this.onSubmitCreate.emit(t),this.modalInstance.close()}moveManager(t,o){if(o)return void this.courseForm.controls.managers.push(new a.NI(t));const r=this.courseForm.value.managers?.findIndex(c=>c===t);this.courseForm.controls.managers.removeAt(r)}moveGroup(t,o){if(o)return void this.courseForm.controls.groups.push(new a.NI(t));const r=this.courseForm.value.groups?.findIndex(c=>c===t);this.courseForm.controls.groups.removeAt(r)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.yh),e.Y36(d.lu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-edit-course-modal"]],outputs:{onSubmitCreate:"onSubmitCreate",onSubmitEdit:"onSubmitEdit"},features:[e.qOj],decls:38,vars:20,consts:[[3,"identifier","closable","escapable","backdrop","target","onDataAdded","onAnyCloseEventFinished"],["modal",""],[1,"modal-content"],[1,"modal-header"],[1,"modal-body"],[1,"form-wrapper"],["type","text","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",3,"control"],[1,"teachers"],[1,"list-header"],[4,"ngFor","ngForOf"],[1,"groups"],[1,"modal-footer"],[3,"onClick"],[3,"disabled","onClick"],[3,"click"]],template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"ngx-smart-modal",0,1),e.NdJ("onDataAdded",function(i){return o.handleAddedDataModal(i)})("onAnyCloseEventFinished",function(){e.CHM(r);const i=e.MAs(1);return o.handleCloseModal(),e.KtG(i.removeData())}),e.TgZ(2,"div",2)(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"label")(8,"span"),e._uU(9,"\u041d\u0430\u0437\u0432\u0430"),e.qZA(),e._UZ(10,"app-input",6),e.qZA(),e.TgZ(11,"div",7)(12,"ul")(13,"div",8),e._uU(14,"\u0412\u0438\u043a\u043b\u0430\u0434\u0430\u0447\u0456"),e.qZA(),e.YNc(15,D,3,2,"li",9),e.ALo(16,"async"),e.qZA(),e.TgZ(17,"ul")(18,"div",8),e._uU(19,"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0438 \u043a\u0443\u0440\u0441\u0443"),e.qZA(),e.YNc(20,N,3,2,"li",9),e.ALo(21,"async"),e.qZA()(),e.TgZ(22,"div",10)(23,"ul")(24,"div",8),e._uU(25,"\u0413\u0440\u0443\u043f\u0438"),e.qZA(),e.YNc(26,k,3,1,"li",9),e.ALo(27,"async"),e.qZA(),e.TgZ(28,"ul")(29,"div",8),e._uU(30,"\u041e\u0431\u0440\u0430\u043d\u0456 \u0433\u0440\u0443\u043f\u0438"),e.qZA(),e.YNc(31,I,3,1,"li",9),e.ALo(32,"async"),e.qZA()()()(),e.TgZ(33,"div",11)(34,"app-button",12),e.NdJ("onClick",function(i){e.CHM(r);const Y=e.MAs(1);return i.preventDefault(),e.KtG(Y.close())}),e._uU(35,"Cancel"),e.qZA(),e.TgZ(36,"app-button",13),e.NdJ("onClick",function(){return o.submitForm()}),e._uU(37,"Submit"),e.qZA()()()()}2&t&&(e.Q6J("identifier",o.identifier)("closable",!0)("escapable",!0)("backdrop",!0)("target","body"),e.xp6(4),e.hij(" ",(o.isForEdit?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f":"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f")+" \u043a\u0443\u0440\u0441\u0443"," "),e.xp6(6),e.Q6J("control",o.courseForm.controls.name),e.xp6(5),e.Q6J("ngForOf",e.lcZ(16,12,o.freeTeachers$)),e.xp6(5),e.Q6J("ngForOf",e.lcZ(21,14,o.pickedTeachers$)),e.xp6(6),e.Q6J("ngForOf",e.lcZ(27,16,o.freeGroups$)),e.xp6(5),e.Q6J("ngForOf",e.lcZ(32,18,o.pickedGroups$)),e.xp6(5),e.Q6J("disabled",o.courseForm.invalid))},dependencies:[l.sg,P.r,E.a,d.Q3,l.Ov],styles:[".modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{margin-bottom:20px;font-size:30px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;margin-top:5px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .teachers[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]{border:solid 1px #b9b5c9;display:grid;grid-template-columns:repeat(2,1fr);max-height:500px;border-radius:8px;overflow:hidden}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .teachers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{max-height:100%;padding:0;overflow-y:auto;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .teachers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:100%}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .teachers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#eeedf2}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .teachers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;border:none;outline:none;background-color:inherit;padding:15px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .teachers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]{text-align:center;width:100%;padding:5px;background-color:#eeedf2;color:#313467;border-bottom:1px solid #b9b5c9}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .teachers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:nth-child(2), .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .groups[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:nth-child(2){border-left:solid 1px #b9b5c9}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end;align-items:center;gap:10px}[_nghost-%COMP%]  .nsm-dialog{max-width:800px}"],changeDetection:0}),n})();function J(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"app-button",6),e.NdJ("onClick",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.openModal())}),e._uU(2,"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043d\u043e\u0432\u0438\u0439 \u043a\u0443\u0440\u0441"),e.qZA()()}}function U(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"li",7)(1,"app-course-item",8),e.NdJ("onEditCourse",function(r){e.CHM(t);const c=e.oxw();return e.KtG(c.openModal(r))})("onDeleteCourse",function(r){e.CHM(t);const c=e.oxw();return e.KtG(c.deleteCourse(r))}),e.qZA()()}if(2&n){const t=s.$implicit;e.xp6(1),e.Q6J("course",t)}}let f=(()=>{class n extends b.y{constructor(t,o){super(),this.ngxSmartModalService=t,this.store=o,this.userTypes=v.b,this.userType$=this.store.select(p.Z3),this.courses$=this.store.select(p.W3)}ngAfterViewInit(){this.createEditCourseModal=this.ngxSmartModalService.getModal(h.R.CreateCourseModalIdentifier)}openModal(t){this.createEditCourseModal.setData({course:t,isForEdit:!!t}).open()}deleteCourse(t){this.store.dispatch((0,_.A)({id:t}))}editCourse(t){this.store.dispatch((0,_.tu)({course:t}))}createCourse(t){this.store.dispatch((0,_.P6)({course:t}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.lu),e.Y36(O.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-courses-page"]],features:[e.qOj],decls:10,vars:6,consts:[[1,"page"],["class","control-panel",4,"ngIf"],[1,"courses"],["class","course-item",4,"ngFor","ngForOf"],[3,"onSubmitCreate","onSubmitEdit"],[1,"control-panel"],[3,"onClick"],[1,"course-item"],[3,"course","onEditCourse","onDeleteCourse"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"\u041a\u0443\u0440\u0441\u0438"),e.qZA(),e.TgZ(3,"section"),e.YNc(4,J,3,0,"div",1),e.ALo(5,"async"),e.TgZ(6,"ul",2),e.YNc(7,U,2,1,"li",3),e.ALo(8,"async"),e.qZA()()(),e.TgZ(9,"app-create-edit-course-modal",4),e.NdJ("onSubmitCreate",function(c){return o.createCourse(c)})("onSubmitEdit",function(c){return o.editCourse(c)}),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",(e.lcZ(5,2,o.userType$)||o.userTypes.Student)>o.userTypes.Student),e.xp6(3),e.Q6J("ngForOf",e.lcZ(8,4,o.courses$)))},dependencies:[l.sg,l.O5,P.r,w,$,l.Ov],styles:[".page[_ngcontent-%COMP%]{padding:20px 30px}.page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .page[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .page[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .page[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#b9b5c9;font-weight:600}.page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:30px;font-size:30px}.courses[_ngcontent-%COMP%]{padding:30px 0 0;margin:20px 0 0;border-top:1px solid #b9b5c9}.courses[_ngcontent-%COMP%]   .course-item[_ngcontent-%COMP%]{margin-bottom:20px}"],changeDetection:0}),n})();var x=u(3537);const S=[{path:"",component:f},{path:":courseId",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-course-details-page"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"course-details-page works!"),e.qZA())}}),n})()},{path:"test",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-test-page"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"test-page works!"),e.qZA())}}),n})()}];let G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[x.Bz.forChild(S),x.Bz]}),n})();var q=u(4466);let Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n,bootstrap:[f]}),n.\u0275inj=e.cJS({imports:[l.ez,a.UX,a.u5,G,q.m,d.Hd]}),n})()}}]);